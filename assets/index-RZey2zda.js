(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const h of e)if(h.type==="childList")for(const a of h.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const h={};return e.integrity&&(h.integrity=e.integrity),e.referrerPolicy&&(h.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?h.credentials="include":e.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(e){if(e.ep)return;e.ep=!0;const h=s(e);fetch(e.href,h)}})();class k{constructor(t,s,o,e,h,a=!1){this.currMap="Level 1",this.x=t,this.y=s,this.length=o,this.width=e,this.speed=h,this.velocityY=0,this.velX=0,this.gravity=.9,this.friction=.8,this.isJumping=!1,this.isDead=!1,this.onLeftWall=!1,this.onRightWall=!1,this.lastWallJump=null,this.worldHeight=1080,this.hardMode=a}draw(t){t.fillStyle="red",t.fillRect(this.x,this.y,this.length,this.width)}respawn(t){this.x=t.spawn.x,this.y=t.spawn.y,this.velX=0,this.velocityY=0,this.isDead=!1,this.isJumping=!1,this.lastWallJump=null}move(t){switch(t){case"a":this.velX=-this.speed;break;case"d":this.velX=this.speed;break;case" ":this.isJumping?this.onLeftWall&&this.lastWallJump!=="left"?(this.hardMode?this.velocityY=-15:this.velocityY=-20,this.isJumping=!0,this.gravity=.9,this.lastWallJump="left"):this.onRightWall&&this.lastWallJump!=="right"&&(this.hardMode?this.velocityY=-15:this.velocityY=-20,this.isJumping=!0,this.gravity=.9,this.lastWallJump="right"):(this.velocityY=-20,this.isJumping=!0);break}}update(t,s){let o=!1,e=!1;this.onLeftWall=!1,this.onRightWall=!1,this.x+=this.velX*t*60;for(const h of s)h.type==="wall"&&this.x+this.length>h.x&&this.x<h.x+h.width&&this.y+this.width>h.y&&this.y<h.y+h.height&&(this.velX>0?(this.x=h.x-this.length,this.onRightWall=!0):this.velX<0&&(this.x=h.x+h.width,this.onLeftWall=!0),this.velX=0);this.y+=this.velocityY*t*60,this.velocityY+=this.gravity*t*60;for(const h of s){const a=this.x+this.length>h.x&&this.x<h.x+h.width&&this.y+this.width>=h.y&&this.y+this.width<=h.y+h.height+this.velocityY*t*60,u=this.x+this.length>h.x&&this.x<h.x+h.width&&this.y>=h.y+h.height&&this.y+this.velocityY*t*60<=h.y+h.height;h.type==="floor"&&a?(this.y=h.y-this.width,this.velocityY=0,this.isJumping=!1,e=!0):h.type==="ice"&&a?(this.y=h.y-this.width,this.velocityY=0,this.isJumping=!1,o=!0):u&&(this.y=h.y+h.height,this.velocityY=0)}o?this.velX*=1:e&&(this.velX*=.8),Math.abs(this.velX)<.01&&(this.velX=0),this.y>=this.worldHeight&&(this.isDead=!0)}collides(t){return this.x<t.x+t.width&&this.x+this.length>t.x&&this.y<t.y+t.height&&this.y+this.width>t.y}}class n{constructor(t,s,o,e,h){this.x=t,this.y=s,this.width=o,this.height=e,this.nextLevel=h}draw(t){t.fillStyle="green",t.fillRect(this.x,this.y,this.width,this.height)}}const b=["red","blue","yellow","green","purple","pink","white"];class Y{constructor(t,s,o,e,h=""){this.x=t,this.y=s,this.radius=o,this.sides=e,this.fillColor=h||b[Math.floor(Math.random()*b.length)],this.alpha=1,this.fading=!1}startFade(t=2e3){this.fading=!0,this.fadeStep=16/t}update(){this.fading&&this.alpha>0&&(this.alpha-=this.fadeStep,this.alpha<0&&(this.alpha=0))}draw(t){t.fillStyle=this.fillColor,t.globalAlpha=this.alpha,t.beginPath(),t.moveTo(this.x,this.y-this.radius);for(let s=0;s<2*this.sides+1;s++){let o=s%2==0?this.radius:this.radius/2,e=Math.PI*s/this.sides-Math.PI/2;t.lineTo(this.x+o*Math.cos(e),this.y+o*Math.sin(e))}t.closePath(),t.fill(),t.globalAlpha=1}}const R=(r,t,s,o,e,h)=>{const a=[],v=t,M=s;function m(){r.clearRect(0,0,v,M),r.save(),r.scale(o,o),r.translate(e,h);for(let p=0;p<a.length;p++){const c=a[p];c.update(),c.draw(r),c.alpha<=0&&a.splice(p,1)}r.restore(),requestAnimationFrame(m)}setInterval(()=>{const p=Math.random()*v,c=Math.random()*M,S=Math.random()*5e3,L=new Y(p,c,15,5);a.push(L),setTimeout(()=>L.startFade(2e3),S)},100),m()};class X{constructor(t,s,o,e=!1){this.ctx=t,this.width=s,this.height=o,this.exits=[],this.platforms=[],this.currMap="Level 1",this.spawn={},this.level10Interval=null,this.hardMode=e}loadMap(t){if(this.exits=[],this.platforms=[],this.currMap=t,t==="Level 1"&&(this.exits.push(new n(this.width-100,this.height/2-53,50,50,"Level 2")),this.hardMode?this.platforms.push({x:0,y:this.height/2,width:50,height:3,color:"red",type:"floor"},{x:this.width/2.5,y:this.height/2,width:50,height:3,color:"red",type:"floor"},{x:this.width/1.2,y:this.height/2,width:50,height:3,color:"red",type:"floor"}):this.platforms.push({x:0,y:this.height/2,width:this.width,height:3,color:"red",type:"floor"}),this.spawn={x:0,y:this.height/2-53}),t==="Level 2"&&(this.exits.push(new n(this.width-100,this.height/2-50,50,50,"Level 3")),this.hardMode?this.platforms.push({x:0,y:this.height/2,width:100,height:3,color:"blue",type:"ice"},{x:3,y:this.height/2,width:3,height:this.height,color:"orange",type:"wall"},{x:100,y:this.height/2,width:3,height:this.height,color:"orange",type:"wall"},{x:200,y:this.height/3,width:100,height:3,color:"blue",type:"ice"},{x:200,y:this.height/3,width:3,height:this.height,color:"orange",type:"wall"},{x:300,y:this.height/3,width:3,height:this.height,color:"orange",type:"wall"},{x:400,y:this.height/5,width:3,height:this.height,color:"orange",type:"wall"},{x:400,y:this.height/5,width:100,height:3,color:"blue",type:"ice"},{x:500,y:this.height/5,width:3,height:this.height,color:"orange",type:"wall"},{x:600,y:this.height/7,width:3,height:this.height,color:"orange",type:"wall"},{x:600,y:this.height/7,width:100,height:3,color:"blue",type:"ice"},{x:700,y:this.height/7,width:3,height:this.height,color:"orange",type:"wall"},{x:800,y:this.height/9,width:3,height:this.height,color:"orange",type:"wall"},{x:800,y:this.height/9,width:150,height:3,color:"blue",type:"ice"},{x:950,y:this.height/9,width:3,height:this.height,color:"orange",type:"wall"}):this.platforms.push({x:0,y:this.height/2,width:this.width/4,height:3,color:"orange",type:this.hardMode?"ice":"floor"},{x:this.width/4,y:this.height/2,width:3,height:this.height-this.height/2,color:"orange",type:"wall"},{x:this.width-this.width/1.7,y:this.height/2,width:3,height:this.height-this.height/2,color:"orange",type:"wall"},{x:this.width-this.width/1.7,y:this.height/2,width:this.width/1.7,height:3,color:"orange",type:this.hardMode?"ice":"floor"}),this.spawn={x:0,y:this.height/2-53}),t==="Level 3"&&(this.hardMode?this.exits.push(new n(this.width-80,this.height-50,50,50,"Level 4")):this.exits.push(new n(this.width-100,this.height/2-50,50,50,"Level 4")),this.platforms.push({x:0,y:this.height/2,width:this.width/6,height:3,color:this.hardMode?"blue":"yellow",type:this.hardMode?"ice":"floor"},{x:this.width/2.6,y:this.height/3.3,width:this.hardMode?100:this.width/7,height:3,color:this.hardMode?"blue":"yellow",type:this.hardMode?"ice":"floor"}),this.hardMode&&this.platforms.push({x:0,y:this.height/2,width:3,height:this.height,color:"orange",type:"wall"},{x:this.width/6,y:this.height/2,width:3,height:this.height,color:"orange",type:"wall"},{x:this.width/2.6,y:this.height/3.3,width:3,height:this.height,color:"yellow",type:"wall"},{x:this.width/2.6+100,y:this.height/3.3,width:3,height:this.height,color:"orange",type:"wall"},{x:this.width-10,y:0,width:3,height:this.height,color:"orange",type:"wall"},{x:this.width-100,y:50,width:3,height:this.height,color:"orange",type:"wall"},{x:this.width-200,y:0,width:3,height:this.height-300,color:"orange",type:"wall"}),this.spawn={x:0,y:this.height/2-53}),t==="Level 4"&&(this.exits.push(new n(this.hardMode?100:0,this.height/2+10,50,50,"Level 5")),this.platforms.push({x:0,y:this.height/2,width:150,height:5,color:"green",type:"floor"},{x:150,y:this.height/2,width:5,height:this.hardMode?0:200,color:"green",type:"wall"},{x:0,y:0,width:3,height:this.height-this.height/2,color:"green",type:"wall"}),this.hardMode&&this.platforms.push({x:150,y:100,width:3,height:this.height/2-100,color:"green",type:"wall"},{x:300,y:100,width:3,height:this.height,color:"green",type:"wall"}),this.spawn={x:3,y:this.height/2-53}),t==="Level 5"&&(this.exits.push(new n(this.width-45,this.height/1.5-50,50,50,"Level 6")),this.platforms.push({x:0,y:this.height/2,width:100,height:3,color:"black",type:"floor"},{x:0,y:this.height-40,width:100,height:3,color:this.hardMode?"black":"white",type:""},{x:this.width/2,y:this.height/1.5,width:100,height:3,color:"black",type:"floor"},{x:this.width/2,y:this.height-40,width:100,height:3,color:this.hardMode?"black":"white",type:""},{x:this.width-200,y:this.height/1.5,width:200,height:3,color:"black",type:"floor"},{x:this.width-200,y:this.height-40,width:200,height:3,color:this.hardMode?"black":"white",type:""}),this.spawn={x:0,y:this.height/2-53}),t==="Level 6"&&(this.exits.push(new n(this.width/5+5,this.height/4+5,50,50,"Level 7")),this.hardMode||this.platforms.push({x:0,y:this.height/2,width:50,height:3,color:"red",type:"floor"}),this.platforms.push({x:this.width/9,y:this.height/6.5,width:5,height:this.height-800,color:this.hardMode?"red":"blue",type:"wall"},{x:this.width/5,y:this.height/4,width:5,height:this.height-400,color:this.hardMode?"red":"blue",type:"wall"},{x:this.width/5,y:this.height/4,width:this.hardMode?700:500,height:3,color:this.hardMode?"red":"blue",type:"floor"}),this.spawn={x:0,y:this.height/2-53}),t==="Level 7"&&(this.exits.push(new n(this.width-80,this.height-90,50,50,"Level 8")),this.hardMode||this.platforms.push({x:this.width/3.3,y:this.height/3,width:58,height:3,color:"purple",type:"floor"}),this.platforms.push({x:0,y:0,width:3,height:this.height,color:"purple",type:"wall"},{x:0,y:this.height/2,width:this.width/40,height:3,color:"purple",type:"floor"},{x:this.width/7,y:this.height/8,width:3,height:this.height/2,color:"purple",type:"wall"},{x:this.width/3,y:0,width:3,height:this.height/3,color:"purple",type:"wall"},{x:this.width/3,y:this.hardMode?this.height/2-100:this.height/2,width:3,height:this.hardMode?this.height:this.height/3,color:"purple",type:"wall"},{x:this.hardMode?this.width/2-100:this.width/2,y:this.height/10,width:3,height:this.height,color:"purple",type:"wall"},{x:this.width/2,y:this.height-40,width:this.width,height:5,color:"purple",type:"floor"}),this.spawn={x:3,y:this.height/2-53}),t==="Level 8"&&(this.exits.push(new n(this.width-this.width/2.5+15,this.height-55,50,50,"Level 9")),this.platforms.push({x:this.width/2.3,y:0,width:5,height:this.height,color:"pink",type:"wall"},{x:this.width/2.3,y:this.height-5,width:this.width/5,height:5,color:"pink",type:"floor"},{x:this.width-this.width/2.5,y:this.height/8,width:5,height:this.height,color:"pink",type:"wall"}),this.spawn={x:this.width/2,y:this.height-55}),t==="Level 9"&&(this.exits.push(new n(this.width-50,this.height-90,50,50,"Level 10")),this.hardMode||this.platforms.push({x:this.width/2,y:this.height/2+200,width:50,height:5,color:"white",type:"floor"}),this.platforms.push({x:0,y:55,width:55,height:5,color:"white",type:"floor"},{x:50,y:0,width:5,height:55,color:"white",type:"wall"},{x:this.width/1.7,y:this.height-40,width:this.width,height:5,color:"white",type:"floor"},{x:this.width/1.7,y:0,width:5,height:this.height/1.5-10,color:"white",type:"wall"},{x:this.width/1.7,y:this.height/1.5+60,width:5,height:this.height/4-30,color:"white",type:"wall"}),this.spawn={x:0,y:0}),t==="Level 10"?(this.level10Interval&&clearInterval(this.level10Interval),this.level10Interval=setInterval(()=>{const s=Math.random()*this.width,o=Math.random()*this.height,e=new n(s,o,50,50,"Level 11");this.exits.push(e),setTimeout(()=>{const h=this.exits.indexOf(e);h>-1&&this.exits.splice(h,1)},1e3)},1e3),this.platforms.push({x:0,y:0,width:5,height:this.height,color:"white",type:"wall"},{x:0,y:0,width:this.width,height:5,color:"white",type:"wall"},{x:this.width-5,y:0,width:5,height:this.height,color:"white",type:"wall"},{x:0,y:this.height-5,width:this.width,height:5,color:"white",type:"floor"}),this.spawn={x:this.width/2,y:this.height-55}):this.level10Interval&&(clearInterval(this.level10Interval),this.level10Interval=null),t==="Level 11"){const s=document.getElementById("stars"),o=s.getContext("2d");s.width=window.innerWidth,s.height=window.innerHeight;const e=Math.min(s.width/1920,s.height/1080),h=(s.width/e-1920)/2,a=(s.height/e-1080)/2;R(o,1920,1080,e,h,a),this.exits.push(new n(this.width/2-50,this.height-200,50,50,"Level 1")),this.platforms.push({x:this.width/2-50,y:this.height/2,width:50,height:3,color:"white",type:"floor"}),this.spawn={x:this.width/2-50,y:this.height/2-55}}}drawMap(){for(const t of this.platforms)this.ctx.fillStyle=t.color,this.ctx.fillRect(t.x,t.y,t.width,t.height);for(const t of this.exits)t.draw(this.ctx)}}const y=document.getElementById("canvas"),i=y.getContext("2d"),J=document.querySelector("body");J.style.backgroundColor="black";let f,I,T;const d=1920,g=1080;function E(){y.width=window.innerWidth,y.height=window.innerHeight,f=Math.min(y.width/d,y.height/g),I=(y.width-d*f)/2,T=(y.height-g*f)/2}E();window.addEventListener("resize",E);const w=new X(i,d,g);w.loadMap("Level 1");const l=new k(w.spawn.x,w.spawn.y,50,50,15),x={};window.addEventListener("keydown",r=>{x[r.key]=!0});window.addEventListener("keyup",r=>{x[r.key]=!1});let A=0;function W(r){const t=(r-A)/1e3;A=r,i.clearRect(0,0,y.width,y.height),i.save(),i.scale(f,f),i.translate(I,T),l.isDead?l.respawn(w):(x.a&&l.move("a"),x.d&&l.move("d"),x[" "]&&l.move(" "),l.update(t,w.platforms,y)),l.currMap==="Level 1"&&!l.hardMode&&(i.save(),i.fillStyle="white",i.textAlign="center",i.font="200px Arial",i.fillText("Square Game",d/2,g/2),i.font="100px Arial",i.fillText("a",d/3,g/1.5),i.fillText("space",d/2,g/1.5),i.fillText("d",d/1.5,g/1.5),i.lineWidth=10,i.strokeStyle="white",i.strokeRect(d/3-50,g/1.5-80,100,100),i.strokeRect(d/2-150,g/1.5-80,300,100),i.strokeRect(d/1.5-50,g/1.5-80,100,100),i.restore()),l.currMap==="Level 2"&&!l.hardMode&&(i.save(),i.fillStyle="white",i.textAlign="center",i.font="200px Arial",i.fillText("By N. Lugo",d/2,g/2),i.restore()),l.draw(i),w.drawMap();for(const s of w.exits)l.collides(s)&&(l.currMap==="Level 11"&&!l.hardMode?(l.hardMode=!0,w.hardMode=!0):l.currMap==="Level 11"&&l.hardMode&&(l.hardMode=!1,w.hardMode=!1),w.loadMap(s.nextLevel),l.currMap=s.nextLevel,l.velocityY=0,l.velX=0,l.isJumping=!1,w.spawn&&(l.x=w.spawn.x,l.y=w.spawn.y));l.currMap==="Level 11"&&(i.save(),i.fillStyle="white",i.textAlign="center",!l.hardMode||!w.hardMode?(i.font="100px Arial",i.fillText("The End!",d/2,g/3),i.font="50px Arial",i.fillText("Hard Mode?",d/2-30,g-250)):(i.font="100px Arial",i.fillText("The Official End!",d/2,g/3),i.font="50px Arial",i.fillText("Restart?",d/2-30,g-250)),i.restore()),i.restore(),requestAnimationFrame(W)}requestAnimationFrame(W);
